(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"3f88":function(t,o,n){"use strict";n.r(o);var e=n("b9f8"),a=n.n(e);for(var i in e)"default"!==i&&function(t){n.d(o,t,function(){return e[t]})}(i);o["default"]=a.a},"66dd":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("view",{staticClass:"content"},[n("view",{staticClass:"btn-row"},[n("button",{staticClass:"primary",attrs:{type:"primary",eventid:"944cae44-0"},on:{tap:t.androidCheckUpdate}},[n("i",{staticClass:"icon iconfont icon-app_icons--",staticStyle:{"font-size":"18rpx"}}),n("text",[t._v("检查更新1")])],1),n("br"),n("button",{staticClass:"primary",attrs:{type:"primary",eventid:"944cae44-1"},on:{tap:t.checkUpdate}},[n("i",{staticClass:"icon iconfont icon-app_icons--",staticStyle:{"font-size":"18rpx"}}),n("text",[t._v("检查更新2")])],1),n("br"),t.download?n("view",[t._v("已下载: "+t._s(t.size/1024/1024+"M")),n("br"),t._v("总共:   "+t._s(t.download.totalSize/1024/1024+"M")),n("br"),t._v("完成进度: "+t._s(t.size/t.download.totalSize*100)+"%")],1):t._e(),n("br"),n("br"),n("br"),t.download?n("view",[t._v("======================")]):t._e(),t.download?n("view",[t._v("ID: "+t._s(t.download.id)),n("br"),t._v("URL: "+t._s(t.download.url)),n("br"),t._v("状态: "+t._s(t.download.state)),n("br"),t._v("参数: "+t._s(t.download.options)),n("br"),t._v("文件名: "+t._s(t.download.filename)),n("br"),t._v("已下载: "+t._s(t.download.downloadedSize)),n("br"),t._v("总大小: "+t._s(t.download.totalSize)),n("br")],1):t._e(),n("br"),n("br"),n("br"),t.download?n("view",[t._v("======================")]):t._e(),t.download?n("view",[t._v(t._s(t.dtask.id)),n("br"),t._v(t._s(t.dtask.url)),n("br"),t._v(t._s(t.dtask.state)),n("br"),t._v(t._s(t.dtask.options)),n("br"),t._v(t._s(t.dtask.filename)),n("br"),t._v(t._s(t.dtask.downloadedSize)),n("br"),t._v(t._s(t.dtask.totalSize)),n("br")],1):t._e(),n("button",{staticClass:"primary",attrs:{type:"primary",eventid:"944cae44-2"},on:{tap:t.bindLogin}},[t._v("登录")]),n("br"),t.isLogin?n("button",{attrs:{type:"default",eventid:"944cae44-3"},on:{tap:t.bindLogout}},[t._v("退出登录")]):t._e(),n("br"),n("button",{attrs:{type:"default",eventid:"944cae44-4"},on:{tap:t.findallbookinfo}},[t._v("查询")])],1)])},a=[];n.d(o,"a",function(){return e}),n.d(o,"b",function(){return a})},8976:function(t,o,n){"use strict";n("a2ec");var e=i(n("b0ce")),a=i(n("c566"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,e.default)(a.default))},b9f8:function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=n("2f62"),a=n("42fd");function i(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.forEach(function(o){s(t,o,n[o])})}return t}function s(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var r={computed:i({},(0,e.mapState)("modules/userinfo",{isLogin:function(t){return t.userInfo.isLogin},forcedLogin:function(t){return t.forcedLogin}})),data:function(){return{version:1,size:0,download:null,status:0,dtask:null}},onLoad:function(){console.log(this.isLogin),t.getSystemInfo({success:function(t){console.log(t.platform),"android"==t.platform&&(0,a.checkAppUpdate)()}})},onUnload:function(){console.log("onUnload"),plus.downloader.clear(state),dtask.abort()},methods:i({},(0,e.mapMutations)("modules/userinfo",["logout"]),{bindLogin:function(){t.navigateTo({url:"../login/login"})},bindLogout:function(){this.logout(),t.removeStorageSync("LOGIN_USER"),this.forcedLogin&&t.reLaunch({url:"../login/login"})},androidCheckUpdate:function(){var o=this,n=this;t.request({url:"http://kk0221.ngrok.xiaomiqiu.cn/version.json",method:"GET",data:{},success:function(e){if(e.data&&1==e.data.status){if(3!=plus.networkinfo.getCurrentType())return void t.showToast({title:"有新的版本发布，检测到您目前非Wifi连接，为节约您的流量，程序已停止自动更新，将在您连接WIFI之后重新检测更新。",mask:!1,duration:5e3,icon:"none"});t.showToast({title:"有新的版本发布，检测到您目前为Wifi连接，程序已启动自动更新。新版本下载完成后将自动弹出安装程序。",mask:!1,duration:5e3,icon:"none"}),o.dtask=plus.downloader.createDownload(e.data.url,{},function(o,n){200==n?plus.runtime.install(plus.io.convertLocalFileSystemURL(o.filename),{},{},function(o){t.showToast({title:"安装失败",mask:!1,duration:1500})}):t.showToast({title:"更新失败",mask:!1,duration:1500})}),o.dtask.addEventListener("statechanged",n.onStateChanged,!1),o.dtask.start()}},fail:function(){},complete:function(){}})},findallbookinfo:function(){this.$hy_ajax({url:"/findallbookinfo",data:{userId:1},success:function(t){console.log("获取token成功，重新执行请求！")}})},onStateChanged:function(t,o){this.size=t.downloadedSize,this.download=t,this.status=o,console.log(JSON.stringify(plus.downloader))},checkUpdate:function(){(0,a.checkAppUpdate)()}})};o.default=r}).call(this,n("649d")["default"])},c566:function(t,o,n){"use strict";n.r(o);var e=n("66dd"),a=n("3f88");for(var i in a)"default"!==i&&function(t){n.d(o,t,function(){return a[t]})}(i);var s=n("2877"),r=Object(s["a"])(a["default"],e["a"],e["b"],!1,null,null,null);r.options.__file="user.vue",o["default"]=r.exports}},[["8976","common/runtime","common/vendor"]]]);